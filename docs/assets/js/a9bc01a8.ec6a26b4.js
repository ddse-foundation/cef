"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[474],{8453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>c});var n=t(6540);const r={},i=n.createContext(r);function a(e){const s=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:s},e.children)}},8707:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"validation","title":"Validation & Test Coverage","description":"Everything below maps to concrete tests in cef-framework/src/test/java\u2014no placeholder claims.","source":"@site/docs/validation.md","sourceDirName":".","slug":"/validation","permalink":"/cef/docs/validation","draft":false,"unlisted":false,"editUrl":"https://github.com/ddse-foundation/cef/tree/main/site/docs/validation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Benchmarks (beta-0.5)","permalink":"/cef/docs/benchmarks"},"next":{"title":"Release Notes","permalink":"/cef/docs/release-notes"}}');var r=t(4848),i=t(8453);const a={},c="Validation & Test Coverage",o={},d=[{value:"Always-On Coverage (default <code>mvn test</code> in <code>cef-framework</code>)",id:"always-on-coverage-default-mvn-test-in-cef-framework",level:2},{value:"Optional Integration Tests (gated by system properties)",id:"optional-integration-tests-gated-by-system-properties",level:2},{value:"Datasets Used in Tests",id:"datasets-used-in-tests",level:2},{value:"Reproduction Recipes",id:"reproduction-recipes",level:2},{value:"What to Watch",id:"what-to-watch",level:2}];function l(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"validation--test-coverage",children:"Validation & Test Coverage"})}),"\n",(0,r.jsxs)(s.p,{children:["Everything below maps to concrete tests in ",(0,r.jsx)(s.code,{children:"cef-framework/src/test/java"}),"\u2014no placeholder claims."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsxs)(s.h2,{id:"always-on-coverage-default-mvn-test-in-cef-framework",children:["Always-On Coverage (default ",(0,r.jsx)(s.code,{children:"mvn test"})," in ",(0,r.jsx)(s.code,{children:"cef-framework"}),")"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Medical benchmark harness"})," (",(0,r.jsx)(s.code,{children:"MedicalBenchmarkTest"}),"): Generates ",(0,r.jsx)(s.code,{children:"BENCHMARK_REPORT.md"})," with 4 scenarios (contraindications, behavioral risk, cascading side effects, shared doctors). Uses DuckDB + JGraphT + vLLM + Ollama embeddings."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Advanced medical graph patterns"})," (",(0,r.jsx)(s.code,{children:"MedicalBenchmarkTest2"}),"): Multi-path separation/aggregation, producing ",(0,r.jsx)(s.code,{children:"BENCHMARK_REPORT_2.md"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"SAP financial/supply-chain suite"})," (",(0,r.jsx)(s.code,{children:"SapBenchmarkTest"}),"): Writes ",(0,r.jsx)(s.code,{children:"SAP_BENCHMARK_REPORT.md"})," for enterprise-style multi-hop traversal."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Graph correctness"})," (",(0,r.jsx)(s.code,{children:"InMemoryKnowledgeGraphTest"}),"): CRUD, traversal, concurrency sanity on the JGraphT-backed store."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Repository layer"})," (",(0,r.jsx)(s.code,{children:"BaseRepositoryTest"}),"): Reactive persistence for nodes/edges/chunks."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Retriever integration"})," (",(0,r.jsx)(s.code,{children:"OllamaKnowledgeRetrieverIntegrationTest"}),"): Ensures ",(0,r.jsx)(s.code,{children:"KnowledgeRetriever.retrieve"})," returns ranked chunks with Ollama embeddings."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"optional-integration-tests-gated-by-system-properties",children:"Optional Integration Tests (gated by system properties)"}),"\n",(0,r.jsx)(s.p,{children:"Run these only when the required services/models are available."}),"\n",(0,r.jsxs)(s.table,{children:[(0,r.jsx)(s.thead,{children:(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.th,{children:"Test"}),(0,r.jsx)(s.th,{children:"Purpose"}),(0,r.jsx)(s.th,{children:"How to run"})]})}),(0,r.jsxs)(s.tbody,{children:[(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"OllamaEmbeddingIntegrationTest"})}),(0,r.jsxs)(s.td,{children:["Verifies real ",(0,r.jsx)(s.code,{children:"nomic-embed-text"})," embeddings (dimension 768) via Spring AI and CEF wrapper"]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mvn test -Dembedding.integration=true -Dtest=OllamaEmbeddingIntegrationTest"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"McpToolLLMIntegrationTest"})}),(0,r.jsxs)(s.td,{children:["LLM (Ollama ",(0,r.jsx)(s.code,{children:"qwq:32b"}),") reads MCP schema and builds graphHints for retrieval; checks fallback behavior"]}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mvn test -Dollama.integration=true -Dtest=McpToolLLMIntegrationTest"})})]}),(0,r.jsxs)(s.tr,{children:[(0,r.jsxs)(s.td,{children:[(0,r.jsx)(s.code,{children:"VllmMcpToolIntegrationTest"})," / ",(0,r.jsx)(s.code,{children:"VllmMcpCallTest"})]}),(0,r.jsx)(s.td,{children:"Validates MCP tool against vLLM server for end-to-end retrieval"}),(0,r.jsx)(s.td,{children:(0,r.jsx)(s.code,{children:"mvn test -Dvllm.integration=true -Dtest=VllmMcpToolIntegrationTest"})})]})]})]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"datasets-used-in-tests",children:"Datasets Used in Tests"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Medical benchmark"}),": 177 nodes, 455 edges, chunks across patients, doctors, conditions, medications (",(0,r.jsx)(s.code,{children:"medical_benchmark_data.json"}),"). Powers both benchmark suites."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"SAP benchmark"}),": Vendors, materials, invoices, projects, budgets with 4\u20136 hop relations (",(0,r.jsx)(s.code,{children:"sap_data/*.csv"})," parsed by ",(0,r.jsx)(s.code,{children:"SapDataParser"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fixtures for ad-hoc scenarios"}),": ",(0,r.jsx)(s.code,{children:"MedicalDomainFixtures"})," and ",(0,r.jsx)(s.code,{children:"LegalDomainFixtures"})," create small graphs for MCP tool and retriever tests."]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"reproduction-recipes",children:"Reproduction Recipes"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"cd cef-framework\n\n# Full default suite (benchmarks + graph + repository tests)\nmvn test\n\n# Specific reports\nmvn -Dtest=MedicalBenchmarkTest test\nmvn -Dtest=MedicalBenchmarkTest2 test\nmvn -Dtest=SapBenchmarkTest test\n\n# Verify graph store correctness only\nmvn -Dtest=InMemoryKnowledgeGraphTest test\n"})}),"\n",(0,r.jsxs)(s.p,{children:["Reports are emitted alongside the module (",(0,r.jsx)(s.code,{children:"cef-framework/BENCHMARK_REPORT*.md"}),", ",(0,r.jsx)(s.code,{children:"SAP_BENCHMARK_REPORT.md"}),"). Integration tests log the external endpoints they hit (Ollama, vLLM) so you can confirm connectivity."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"what-to-watch",children:"What to Watch"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Latency vs. coverage:"})," Medical domains show 60\u2013220% chunk lift with ~4\u201313 ms overhead; SAP shows parity in coverage but higher traversal cost (75\u2013110% latency)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Graph size constraints:"})," JGraphT is validated up to ~100K nodes (see Known Issues for memory guidance). Move to Neo4j/pgvector when you exceed that."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Fallback discipline:"})," If graph traversal yields < 3 chunks, retrieval falls back to vector-only; benchmarks assert this behavior so regressions are caught."]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);